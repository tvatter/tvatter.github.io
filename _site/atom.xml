<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

 <title></title>
 <link href="https://tvatter.github.io//atom.xml" rel="self"/>
 <link href="https://tvatter.github.io//"/>
 <updated>2017-12-18T01:40:23+00:00</updated>
 <id>https://tvatter.github.io/</id>
 <author>
   <name>Thibault Vatter</name>
   <email>thibault.vatter@gmail.com</email>
 </author>

 
 <entry>
   <title>The value of lead time</title>
   <link href="https://tvatter.github.io//2017/06/16/the-value-of-lead-time/"/>
   <updated>2017-06-16T00:00:00+01:00</updated>
   <id>https://tvatter.github.io//2017/06/16/the-value-of-lead-time</id>
   <content type="html">&lt;p&gt;In &lt;a href=&quot;#references&quot;&gt;two very nice papers&lt;/a&gt;, Suzanne and her collaborators developped 
an interesting idea about valuing lead time based on financial mathematics concepts used traditionally for option pricing. In the &lt;a href=&quot;https://en.wikipedia.org/wiki/Newsvendor_model&quot;&gt;standard newsvendor model&lt;/a&gt;, the profits of the firm at delivery time &lt;script type=&quot;math/tex&quot;&gt;T&lt;/script&gt; for an order of &lt;script type=&quot;math/tex&quot;&gt;Q&lt;/script&gt; units are&lt;/p&gt;

&lt;p&gt;\[
\begin{align}
\Pi_T &amp;amp;= p \min(D_T,Q) - c Q + s \max(Q-D_T, 0) \\
&amp;amp;= (p-c) Q - (p-s) \max(Q-D_T, 0),
\end{align}
\]&lt;/p&gt;

&lt;p&gt;where &lt;script type=&quot;math/tex&quot;&gt;D_T&lt;/script&gt; is the demand, &lt;script type=&quot;math/tex&quot;&gt;p&lt;/script&gt; is the selling price of the product, &lt;script type=&quot;math/tex&quot;&gt;c&lt;/script&gt; its cost and &lt;script type=&quot;math/tex&quot;&gt;s&lt;/script&gt; its salvage value. The usual solution, i.e. the profit-maximizing order quantity is given by &lt;script type=&quot;math/tex&quot;&gt;Q = F^{-1}(\alpha)&lt;/script&gt;,
where &lt;script type=&quot;math/tex&quot;&gt;F&lt;/script&gt; is the distribution of the unkown demand and &lt;script type=&quot;math/tex&quot;&gt;\alpha = (p-c)/(p-s)&lt;/script&gt;.&lt;/p&gt;

&lt;p&gt;Looking closer at the profits, one recognizes in &lt;script type=&quot;math/tex&quot;&gt;\max(Q-D_T, 0)&lt;/script&gt; the payoff of a put 
option on the demand with strike &lt;script type=&quot;math/tex&quot;&gt;Q&lt;/script&gt;. Under absence of arbitrage, the &lt;script type=&quot;math/tex&quot;&gt;t \leq T&lt;/script&gt; price of such an option is &lt;script type=&quot;math/tex&quot;&gt;P(D_t,t,T,Q) = E^{\mathcal{Q}}_t \left[ \max(Q-D_T, 0) \right]&lt;/script&gt;, where &lt;script type=&quot;math/tex&quot;&gt;\mathcal{Q}&lt;/script&gt; denotes the risk-neutral probability measure, and thus the expected profit can be written as&lt;/p&gt;

&lt;p&gt;\[
 E^{\mathcal{Q}}_t \left[ \Pi_T \right] = (p-c) Q - (p-s) P(D_t,t,T,Q).
\]&lt;/p&gt;

&lt;p&gt;Let us assume that the firm as the choice between&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;producing at &lt;script type=&quot;math/tex&quot;&gt;t_s \leq  T&lt;/script&gt; for a cost &lt;script type=&quot;math/tex&quot;&gt;c_s&lt;/script&gt;,&lt;/li&gt;
  &lt;li&gt;producing at &lt;script type=&quot;math/tex&quot;&gt;% &lt;![CDATA[
t_l&lt; t_s %]]&gt;&lt;/script&gt; for a cost &lt;script type=&quot;math/tex&quot;&gt;% &lt;![CDATA[
c_l &lt; c_s %]]&gt;&lt;/script&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This is typical of a situation when a firm can choose between a local production or a delocalization. Now, the interesting question is: how can we value lead time? In other words, what are the right &lt;script type=&quot;math/tex&quot;&gt;c_l&lt;/script&gt; and &lt;script type=&quot;math/tex&quot;&gt;c_s&lt;/script&gt; to compensate the firm for the uncertainty about future demand? Or given &lt;script type=&quot;math/tex&quot;&gt;c_s&lt;/script&gt;, which &lt;script type=&quot;math/tex&quot;&gt;c_l&lt;/script&gt; would the firm require to be indifferent between producing at &lt;script type=&quot;math/tex&quot;&gt;t_s&lt;/script&gt; and &lt;script type=&quot;math/tex&quot;&gt;t_l&lt;/script&gt;?&lt;/p&gt;

&lt;p&gt;For the sake of simplicity, we will fix &lt;script type=&quot;math/tex&quot;&gt;t_s = T&lt;/script&gt; (i.e., &lt;script type=&quot;math/tex&quot;&gt;c_s&lt;/script&gt; is the make-to-order cost), &lt;script type=&quot;math/tex&quot;&gt;t_l=0&lt;/script&gt; and &lt;script type=&quot;math/tex&quot;&gt;D_0=1&lt;/script&gt;. Given &lt;script type=&quot;math/tex&quot;&gt;c_l&lt;/script&gt;, let &lt;script type=&quot;math/tex&quot;&gt;Q_l&lt;/script&gt; denote the profit maximizing order quantity, namely
\[
 Q_l(c_l) = \mbox{argmax}_Q \left\lbrace (p-c_l) Q - (p-s) P(1,0,T,Q) \right\rbrace.
\]&lt;/p&gt;

&lt;p&gt;In the make-to-order case, it is clear that &lt;script type=&quot;math/tex&quot;&gt;Q_s=D_T&lt;/script&gt;. Since, under the absence of arbitrage, we have 
&lt;script type=&quot;math/tex&quot;&gt;E^{\mathcal{Q}}_t \left[ D_T \right] = D_t&lt;/script&gt;, it follows that the expected profit at time &lt;script type=&quot;math/tex&quot;&gt;0&lt;/script&gt; is simply &lt;script type=&quot;math/tex&quot;&gt;E^{\mathcal{Q}}_0 \left[ \Pi_T(c_s) \right] = p-c_s&lt;/script&gt;. 
Furthermore, since the cost &lt;script type=&quot;math/tex&quot;&gt;c_l&lt;/script&gt; making the firm indifferent between producing at time &lt;script type=&quot;math/tex&quot;&gt;0&lt;/script&gt; or time &lt;script type=&quot;math/tex&quot;&gt;T&lt;/script&gt; is the cost such that the expected profits are equal, namely &lt;script type=&quot;math/tex&quot;&gt;E^{\mathcal{Q}}_0 \left[ \Pi_T(c_s) \right] = E^{\mathcal{Q}}_0 \left[ \Pi_T(c_l) \right]&lt;/script&gt;, it is the solution to&lt;/p&gt;

&lt;p&gt;\[
p-c_s = (p-c_l) Q_l(c_l) + (p-s) P(1,0,T,Q_l(c_l)).
\]&lt;/p&gt;

&lt;p&gt;In the &lt;a href=&quot;https://shiny.rstudio.com/&quot;&gt;shiny app&lt;/a&gt; below (see &lt;a href=&quot;https://tvatter.shinyapps.io/shinycdf/&quot;&gt;https://tvatter.shinyapps.io/shinycdf/&lt;/a&gt; for the full screen version), we assume that &lt;script type=&quot;math/tex&quot;&gt;T=1&lt;/script&gt; and show the cost differential frontier, namely &lt;script type=&quot;math/tex&quot;&gt;(c_s-c_l)/c_s&lt;/script&gt; as a function of &lt;script type=&quot;math/tex&quot;&gt;t_l \in [0,T]&lt;/script&gt;.&lt;/p&gt;

&lt;!--There are currently four stochastic processes (without drift) available for the demand:
* The geometric Brownian motion: 
\\[
dD_t = \sigma D_t dW_t
\\]
* The Heston stochastic volatility model: 
\\[
\begin{align}
dD_t = \sqrt{v_t} D_t dW_{1,t} \\
v_t = \kappa (\theta - v_t) dt + \sigma \sqrt{v_t} dW_{2,t}
\end{align}
\\]
* The Heston stochastic volatility model: 
\\[
\begin{align}
dD_t = \sqrt{v_t} D_t dW_{1,t} \\
v_t = \kappa (\theta - v_t) dt + \sigma \sqrt{v_t} dW_{2,t}
\end{align}
\\]--&gt;

&lt;iframe src=&quot;https://tvatter.shinyapps.io/shinycdf/&quot; width=&quot;100%&quot; height=&quot;600&quot; style=&quot;border: none;&quot;&gt;&lt;/iframe&gt;

&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;

&lt;p&gt;de Treville, S., Schürhoff, N., Trigeorgis, L. and Avanzi, B. (2014)&lt;br /&gt;
&lt;a href=&quot;http://dx.doi.org/10.1111/poms.12223&quot;&gt;Optimal Sourcing and Lead-Time Reduction under Evolutionary Demand  Risk&lt;/a&gt;&lt;br /&gt;
&lt;em&gt;Production and Operations Management, Volume 23, Issue 12, 2103-2117&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;de Treville, S., Bicer, I., Chavez-Demoulin, V., Hagspiel, V., Schürhoff, N., Tasserit, C. and Wager, S. (2014)&lt;br /&gt;
&lt;a href=&quot;http://dx.doi.org/10.1016/j.jom.2014.06.002&quot;&gt;Valuing lead time&lt;/a&gt;&lt;br /&gt;
&lt;em&gt;Journal of Operations Management, Volume 32, Issue 6, 337-346&lt;/em&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Another look at confounding</title>
   <link href="https://tvatter.github.io//2017/03/29/another-look-at-confounding/"/>
   <updated>2017-03-29T00:00:00+01:00</updated>
   <id>https://tvatter.github.io//2017/03/29/another-look-at-confounding</id>
   <content type="html">&lt;p&gt;Assume that one is interested in studying a relationship between two random 
variables &lt;script type=&quot;math/tex&quot;&gt;X&lt;/script&gt; and &lt;script type=&quot;math/tex&quot;&gt;Y&lt;/script&gt;. Simply put, a variable &lt;script type=&quot;math/tex&quot;&gt;Z&lt;/script&gt; is said to be confonfounding 
if it explains some (or all) of the dependence between &lt;script type=&quot;math/tex&quot;&gt;X&lt;/script&gt; and &lt;script type=&quot;math/tex&quot;&gt;Y&lt;/script&gt;. For instance, 
if &lt;script type=&quot;math/tex&quot;&gt;Z&lt;/script&gt; is such that &lt;script type=&quot;math/tex&quot;&gt;X \perp Y  \mid Z&lt;/script&gt;, then one says that &lt;script type=&quot;math/tex&quot;&gt;Z&lt;/script&gt; is a confounding 
variable for the relationship between &lt;script type=&quot;math/tex&quot;&gt;X&lt;/script&gt; and &lt;script type=&quot;math/tex&quot;&gt;Y&lt;/script&gt;. This situation is illustrated 
in the following graphical model:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/figure/source/another-look-at-confounding/2017-03-29-another-look-at-confounding/unnamed-chunk-1-1.png&quot; alt=&quot;plot of chunk unnamed-chunk-1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;For instance, with &lt;script type=&quot;math/tex&quot;&gt;X \mid Z \sim N(Z,1)&lt;/script&gt;, &lt;script type=&quot;math/tex&quot;&gt;Y  \mid Z \sim N(Z,1)&lt;/script&gt;, and 
&lt;script type=&quot;math/tex&quot;&gt;Z \sim N(0,2)&lt;/script&gt;, we have that &lt;script type=&quot;math/tex&quot;&gt;corr \left(X,Y \right)=0.8&lt;/script&gt;, namely &lt;script type=&quot;math/tex&quot;&gt;X&lt;/script&gt; and &lt;script type=&quot;math/tex&quot;&gt;Y&lt;/script&gt; are correlated. 
However, since &lt;script type=&quot;math/tex&quot;&gt;corr \left(X,Z \right)=\sqrt{0.8}&lt;/script&gt; and &lt;script type=&quot;math/tex&quot;&gt;corr \left(Y,Z \right)=\sqrt{0.8}&lt;/script&gt;, there is no partial correlation between &lt;script type=&quot;math/tex&quot;&gt;X&lt;/script&gt; and &lt;script type=&quot;math/tex&quot;&gt;Y&lt;/script&gt; when controlling for the effect of &lt;script type=&quot;math/tex&quot;&gt;Z&lt;/script&gt;, that is&lt;/p&gt;

&lt;p&gt;\[
corr \left(X,Y;Z \right)= \frac{corr \left(X,Y \right)-corr \left(X,Z \right)corr \left(Y,Z \right)}{\sqrt{1-corr \left(X,Z \right)^2}\sqrt{1-corr \left(X,Y \right)^2}} = 0.
\]&lt;/p&gt;

&lt;p&gt;In other words, &lt;script type=&quot;math/tex&quot;&gt;Z&lt;/script&gt; acts as a confounding variable in the sense that, without taking its effect into account, one could make misleading conclusions on the correlation between &lt;script type=&quot;math/tex&quot;&gt;X&lt;/script&gt; and &lt;script type=&quot;math/tex&quot;&gt;Y&lt;/script&gt;. This can be seen in the following two figures, where &lt;script type=&quot;math/tex&quot;&gt;X&lt;/script&gt; and &lt;script type=&quot;math/tex&quot;&gt;Y&lt;/script&gt; are correlated, 
but &lt;script type=&quot;math/tex&quot;&gt;X-Z&lt;/script&gt; and &lt;script type=&quot;math/tex&quot;&gt;Y-Z&lt;/script&gt; are not:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/figure/source/another-look-at-confounding/2017-03-29-another-look-at-confounding/unnamed-chunk-2-1.png&quot; alt=&quot;plot of chunk unnamed-chunk-2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Consider now the conditional correlation between the random variables &lt;script type=&quot;math/tex&quot;&gt;X&lt;/script&gt; and &lt;script type=&quot;math/tex&quot;&gt;Y&lt;/script&gt; given &lt;script type=&quot;math/tex&quot;&gt;Z&lt;/script&gt;, which is defined by&lt;/p&gt;

&lt;p&gt;\[
corr \left(X,Y \mid Z \right) = 
\frac{E \left[\left\lbrace X-E \left(X \mid Z \right) \right\rbrace \left\lbrace Y-E \left(Y \mid Z \right) \right\rbrace \mid Z \right]}{ \left( E \left[ \left\lbrace X-E \left(X \mid Z \right) \right\rbrace^2 \mid Z \right] E \left[ \left\lbrace Y-E \left(Y \mid Z \right) \right\rbrace^2 \mid Z \right] \right)^{1/2}}
\]&lt;/p&gt;

&lt;p&gt;In the example above, it is clear that &lt;script type=&quot;math/tex&quot;&gt;corr \left(X,Y \mid Z \right) = corr \left(X,Y ; Z \right)&lt;/script&gt;. However, let &lt;script type=&quot;math/tex&quot;&gt;X =  A + BZ&lt;/script&gt; and &lt;script type=&quot;math/tex&quot;&gt;Y =  C + DZ&lt;/script&gt; where &lt;script type=&quot;math/tex&quot;&gt;A,B,C,D&lt;/script&gt; are independently distributed random variables, then&lt;/p&gt;

&lt;p&gt;\[
    corr \left(X,Y \mid Z \right)=&lt;br /&gt;
    \frac{cov \left(A,C \right) + \left\lbrace cov \left(A,D \right)+cov \left(B,C \right) \right\rbrace Z + cov \left(B,D \right)Z^2}{
    \begin{aligned}
 \Bigg[ &amp;amp;\big\lbrace var \left(A \right) + 2\, cov \left(A,B \right)  Z + var \left(B \right)Z^2\big\rbrace \\
           &amp;amp; \cdot \big\lbrace var \left(C \right) + 2\, cov \left(C,D \right)  Z + var \left(D \right)Z^2\big\rbrace \Bigg]^{1/2}
\end{aligned}
    }.
\]&lt;/p&gt;

&lt;p&gt;and if &lt;script type=&quot;math/tex&quot;&gt;A,B,C,D&lt;/script&gt; have equal variance and correlation &lt;script type=&quot;math/tex&quot;&gt;\rho&lt;/script&gt;, we have that&lt;/p&gt;

&lt;p&gt;\[
    corr \left(X,Y \mid Z \right)=\frac{\rho \left( 1 + Z \right)^2}{
    \left( 1 + 2\, \rho Z \, + Z^2 \right)}.
\]&lt;/p&gt;

&lt;p&gt;In this example, it is clear that the conditional correlation depends on the value of the conditioning variable &lt;script type=&quot;math/tex&quot;&gt;Z&lt;/script&gt; explicitly. Hence, it is in general not equal to the partial correlation.&lt;/p&gt;

&lt;p&gt;To study how &lt;script type=&quot;math/tex&quot;&gt;Z&lt;/script&gt; can act as a confounding variable in this context, it is interesting to start from 
another example. Consider &lt;script type=&quot;math/tex&quot;&gt;X,Y,Z \sim N(0,1)&lt;/script&gt; marginally,
but such that&lt;/p&gt;

&lt;p&gt;\[
corr \left(X,Y \mid Z \right)= \begin{cases}
-0.5 &amp;amp;\mbox{if } Z \leq 0 \\
0.5 &amp;amp;\mbox{otherwise}
\end{cases}.
\]&lt;/p&gt;

&lt;p&gt;Because &lt;script type=&quot;math/tex&quot;&gt;P(X \leq 0) = 1/2&lt;/script&gt;, we have that &lt;script type=&quot;math/tex&quot;&gt;corr \left(X,Y\right) = 0&lt;/script&gt;, and because &lt;script type=&quot;math/tex&quot;&gt;corr \left(X,Z\right) = 0&lt;/script&gt; and &lt;script type=&quot;math/tex&quot;&gt;corr \left(Y,Z\right) = 0&lt;/script&gt;, we even have &lt;script type=&quot;math/tex&quot;&gt;corr \left(X,Y ; Z\right) = 0&lt;/script&gt;. In other words,
without taking into account the effect of &lt;script type=&quot;math/tex&quot;&gt;Z&lt;/script&gt; or by looking at the partial correlation only, one would wrongly conclude that &lt;script type=&quot;math/tex&quot;&gt;X&lt;/script&gt; and &lt;script type=&quot;math/tex&quot;&gt;Y&lt;/script&gt; are independent, as observed in the following figure:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/figure/source/another-look-at-confounding/2017-03-29-another-look-at-confounding/unnamed-chunk-3-1.png&quot; alt=&quot;plot of chunk unnamed-chunk-3&quot; /&gt;&lt;/p&gt;

&lt;p&gt;To summarize, rather than explaining some (or all) of the dependence between the variables of interest, it is also worth looking at confounding variables as masking relationships!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Set up Travis to embed R in a non-R project</title>
   <link href="https://tvatter.github.io//2017/01/11/set-up-travis-to-embed-r-in-non-r-project/"/>
   <updated>2017-01-11T00:00:00+00:00</updated>
   <id>https://tvatter.github.io//2017/01/11/set-up-travis-to-embed-r-in-non-r-project</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Continuous_integration&quot;&gt;Continuous integration&lt;/a&gt; 
(&lt;a href=&quot;https://en.wikipedia.org/wiki/Continuous_integration&quot;&gt;CI&lt;/a&gt;) is great way of ensuring that code working in your 
local environment will also work with other configurations. If, like me, you’re using &lt;a href=&quot;https://github.com/&quot;&gt;GitHub&lt;/a&gt;, then a neat solution to implement &lt;a href=&quot;https://en.wikipedia.org/wiki/Continuous_integration&quot;&gt;CI&lt;/a&gt; principles within a new project is &lt;a href=&quot;https://travis-ci.org&quot;&gt;Travis CI&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Travis CI is a hosted, distributed continuous integration service used to build and 
test software projects hosted at GitHub.&lt;/p&gt;

  &lt;p&gt;—&lt;cite&gt;Wikipedia&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;However, it is well known that the default environment provided in &lt;a href=&quot;https://travis-ci.org&quot;&gt;Travis CI&lt;/a&gt; 
is somewhat outdated. For instance, while implementing a &lt;a href=&quot;https://github.com/tvatter/vinecopulib&quot;&gt;C++ library for vine copulas&lt;/a&gt;, I 
wanted to unit-test the C++ library by comparing its output to the &lt;a href=&quot;https://cran.r-project.org/web/packages/VineCopula/index.html&quot;&gt;VineCopula  R package&lt;/a&gt;, which 
itself depends on the &lt;a href=&quot;https://cran.r-project.org/web/packages/copula/index.html&quot;&gt;copula R package&lt;/a&gt;. 
Very naively, I then tried to write a &lt;code class=&quot;highlighter-rouge&quot;&gt;.travis.yml&lt;/code&gt; that started with:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;language: cpp
matrix:
  include:
    - os: linux
      dist: trusty
      sudo: required

install:
  - sudo apt-get install r-base
  - sudo apt-get install libgsl0-dev
  - sudo Rscript -e &lt;span class=&quot;s1&quot;&gt;'install.packages(&quot;copula&quot;, repos=&quot;https://cran.rstudio.com/&quot;, lib=&quot;/usr/lib/R/library&quot;)'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Note that &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo apt-get install libgsl0-dev gsl-bin&lt;/code&gt; is used because the 
the &lt;a href=&quot;https://cran.r-project.org/web/packages/copula/index.html&quot;&gt;copula R package&lt;/a&gt; depends on 
the &lt;a href=&quot;https://cran.r-project.org/web/packages/gsl/index.html&quot;&gt;gsl R package&lt;/a&gt;, which requires an install 
of the &lt;a href=&quot;http://www.gnu.org/software/gsl/&quot;&gt;Gnu Scientific Library&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Obviously, the &lt;code class=&quot;highlighter-rouge&quot;&gt;.travis.yml&lt;/code&gt; above didn’t work, as the &lt;a href=&quot;https://travis-ci.org&quot;&gt;Travis CI&lt;/a&gt; log showed:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Warning message: package ‘copula’ is not available &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;R version 3.0.2&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Version 3.0.2? In 2017? Alright, not a big deal, but since it took me a while to fix this issue, I though that 
someone else might be interested in the solution, which is in fact extremely simple. 
One just needs to start the &lt;code class=&quot;highlighter-rouge&quot;&gt;.travis.yml&lt;/code&gt; file with:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;language: cpp
matrix:
  include:
    - os: linux
      dist: trusty
      sudo: required
      
before_install:
  - sudo sh -c &lt;span class=&quot;s1&quot;&gt;'echo &quot;deb https://cloud.r-project.org/bin/linux/ubuntu trusty/&quot; &amp;gt;&amp;gt; /etc/apt/sources.list'&lt;/span&gt;
  - sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9
  - sudo apt-get update

install:
  - sudo apt-get install r-base
  - sudo apt-get install libgsl0-dev
  - sudo Rscript -e &lt;span class=&quot;s1&quot;&gt;'install.packages(&quot;copula&quot;, repos=&quot;https://cran.rstudio.com/&quot;, lib=&quot;/usr/lib/R/library&quot;)'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;To obtain the latest R packages, in &lt;code class=&quot;highlighter-rouge&quot;&gt;before_install&lt;/code&gt;, one does the following:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Add the R repository to the &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/apt/sources.list&lt;/code&gt; file&lt;/li&gt;
  &lt;li&gt;Add the R key to Ubuntu’s key-ring since&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;The Ubuntu archives on CRAN are signed with the key of “Michael Rutter &lt;a href=&quot;marutter@gmail.com&quot;&gt;marutter@gmail.com&lt;/a&gt;” with key ID E084DAB9. —&lt;cite&gt;&lt;a href=&quot;https://cran.r-project.org/bin/linux/ubuntu/&quot;&gt;https://cran.r-project.org/bin/linux/ubuntu/&lt;/a&gt;&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;Update the package lists using the repositories to get information on the newest versions of packages and their dependencies&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;And that’s it! Note that, for a C++ project embedding some R code, one might be interested in 
the R packages &lt;a href=&quot;https://cran.r-project.org/web/packages/Rcpp/index.html&quot;&gt;Rcpp&lt;/a&gt; (for seamless R and C++ Integration) and
&lt;a href=&quot;https://cran.r-project.org/web/packages/RInside/index.html&quot;&gt;RInside&lt;/a&gt; (to Embed R in C++ Applications), as we did 
in &lt;a href=&quot;https://github.com/tvatter/vinecopulib&quot;&gt;vinecopulib&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>My Mathematics Genealogy</title>
   <link href="https://tvatter.github.io//2017/01/10/my-mathematics-genealogy/"/>
   <updated>2017-01-10T00:00:00+00:00</updated>
   <id>https://tvatter.github.io//2017/01/10/my-mathematics-genealogy</id>
   <content type="html">&lt;p&gt;OK, so the first post on this blog is about my (mathematics) genealogy, how narcissistic of me. 
Anyway, I was looking at various ways to crawl and harvest data from websites (i.e., web crawling and scraping), and I thought that it could be fun to learn about it by extracting my ancestry from the 
&lt;a href=&quot;https://genealogy.math.ndsu.nodak.edu/&quot;&gt;Mathematics Genealogy Project&lt;/a&gt; (thereafter &lt;a href=&quot;https://genealogy.math.ndsu.nodak.edu/&quot;&gt;MGP&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Since, to the best of my knowledge, there is no good web crawling and scraping framework in R, I choose to use &lt;code class=&quot;highlighter-rouge&quot;&gt;scrapy&lt;/code&gt; for Python, which is both comprehensive, easy to use and fast. After installing the package 
(e.g., via &lt;code class=&quot;highlighter-rouge&quot;&gt;pip install scrapy&lt;/code&gt;), setting-up a &lt;code class=&quot;highlighter-rouge&quot;&gt;scrapy&lt;/code&gt; directory  with the 
proper content for the mathematical genealogy project is done by simply running:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;scrapy startproject mgp_spider 
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;To scrap the data for a single scholar, I define the class &lt;code class=&quot;highlighter-rouge&quot;&gt;ScholarItem&lt;/code&gt; and 
add it to &lt;code class=&quot;highlighter-rouge&quot;&gt;items.py&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ScholarItem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scrapy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Item&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scrapy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Field&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scrapy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Field&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;children&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scrapy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Field&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Note that an &lt;code class=&quot;highlighter-rouge&quot;&gt;advisor&lt;/code&gt; field could also be included, but the information is somewhat redundant.&lt;/p&gt;

&lt;p&gt;Following the &lt;a href=&quot;https://doc.scrapy.org/en/latest/intro/tutorial.html&quot;&gt;tutorial&lt;/a&gt;, a spider
to crawl my ancestry in the &lt;a href=&quot;https://genealogy.math.ndsu.nodak.edu/&quot;&gt;MGP&lt;/a&gt; by sub-classing &lt;code class=&quot;highlighter-rouge&quot;&gt;scrapy.Spider&lt;/code&gt; in the following way:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MgpSpider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scrapy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Spider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'mgpspider'&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'202169'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kargs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MgpSpider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kargs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start_urls&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;'https://www.genealogy.math.ndsu.nodak.edu/id.php?id='&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;url_to_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tokens&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'='&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tokens&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tokens&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;item&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ScholarItem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;css&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'h2::text'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extract_first&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'id'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url_to_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;children_urls&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;css&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'table'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'id&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;.php&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;?id=&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;d*'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'children'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url_to_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;children_urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;href&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xpath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'//div[@id=&quot;mainContent&quot;]'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'id&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;.php&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;?id=&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;d*'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;href&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;children_urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scrapy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urljoin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;href&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Apart from the spider’s name, the three functions are as follow:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;__init__&lt;/code&gt; is the constructor, which defines the spider’s starting URL. Note that,
  by default, root is set as my &lt;a href=&quot;https://genealogy.math.ndsu.nodak.edu/&quot;&gt;MGP&lt;/a&gt; id number.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;url_to_id&lt;/code&gt; converts an URL into an &lt;a href=&quot;https://genealogy.math.ndsu.nodak.edu/&quot;&gt;MGP&lt;/a&gt; id number.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;parse&lt;/code&gt; does two things:
    &lt;ul&gt;
      &lt;li&gt;First, it scraps the current scholar and saves it using &lt;code class=&quot;highlighter-rouge&quot;&gt;scrapy&lt;/code&gt;’s &lt;code class=&quot;highlighter-rouge&quot;&gt;yield&lt;/code&gt;.&lt;/li&gt;
      &lt;li&gt;Second, it crawls the advisors of the scholar by recursively calling itself.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;And that’s it, the result is then obtained by running:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;scrapy crawl mgpspider -o output.json
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Note that, to crawl the ancestry of my own advisor, I can simply pass its &lt;a href=&quot;https://genealogy.math.ndsu.nodak.edu/&quot;&gt;MGP&lt;/a&gt;
id number to the spider by running:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;scrapy crawl mgpspider -a &lt;span class=&quot;nv&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;86905 -o output.json
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;To leverage &lt;code class=&quot;highlighter-rouge&quot;&gt;igraph&lt;/code&gt;’s nice layouts, the next step is loading the data in &lt;code class=&quot;highlighter-rouge&quot;&gt;R&lt;/code&gt; by running:&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jsonlite&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fromJSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;output.JSON&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Then, to build an &lt;code class=&quot;highlighter-rouge&quot;&gt;igraph&lt;/code&gt; graph, the easiest way is often to construct the graph’s
adjacency matrix:&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;igraph&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ancestry_adj_mat&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sapply&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;children&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;is.element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ancestry_graph&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;graph_from_adjacency_matrix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ancestry_adj_mat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ancestry_graph&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Because the full ancestry is a rather messy graph, the following plot is obtained by 
selecting the sub-graph corresponding to my neighborhood of order 18 using &lt;code class=&quot;highlighter-rouge&quot;&gt;igraph&lt;/code&gt;’s &lt;code class=&quot;highlighter-rouge&quot;&gt;make_ego_graph&lt;/code&gt; 
function (i.e., selecting ancestors with a degree of separation less than or equal to 18):
&lt;img src=&quot;/figure/source/my-mathematics-genealogy/2017-01-10-my-mathematics-genealogy/ancestry_graph-1.png&quot; alt=&quot;plot of chunk ancestry_graph&quot; /&gt;&lt;/p&gt;
</content>
 </entry>
 

</feed>
